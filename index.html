<!DOCTYPE html>
<html style="width:auto">
	<head>
		<meta charset="utf-8">
		<title>Hello There!</title>
	</head>
	<body style="width:auto">
		<canvas id="myCanvas" width=1650 height=900
			style="border:1px solid #c3c3c3">
		</canvas>

		<script>
			var circleX = 100;
			var circleY = 75;
			var mouseX = 0;
			var mouseY = 0;
			var radius = 40;
			var canvas = document.getElementById("myCanvas");
			var ctx = canvas.getContext("2d");
			moveCircle(circleX, circleY);

			(function() {
			    document.onmousemove = handleMouseMove;
			    function handleMouseMove(event) {
			        var dot, eventDoc, doc, body, pageX, pageY;

			        event = event || window.event; // IE-ism

			        // If pageX/Y aren't available and clientX/Y are,
			        // calculate pageX/Y - logic taken from jQuery.
			        // (This is to support old IE)
			        if (event.pageX == null && event.clientX != null) {
			            eventDoc = (event.target && event.target.ownerDocument) || document;
			            doc = eventDoc.documentElement;
			            body = eventDoc.body;

			            event.pageX = event.clientX +
			              (doc && doc.scrollLeft || body && body.scrollLeft || 0) -
			              (doc && doc.clientLeft || body && body.clientLeft || 0);
			            event.pageY = event.clientY +
			              (doc && doc.scrollTop  || body && body.scrollTop  || 0) -
			              (doc && doc.clientTop  || body && body.clientTop  || 0 );
			        }
			        onMouseMove(event.pageX, event.pageY)
			    }
			})();

			function moveCircle(x, y) {
				ctx.clearRect(0, 0, canvas.width, canvas.height);
				ctx.beginPath();
				ctx.fillStyle = "#FFaa00";
				ctx.arc(x, y, radius, 0, 2 * Math.PI);
				ctx.fill();
				ctx.stroke();
			};

			function onMouseMove(x, y) {
				mouseX = x;
				mouseY = y;
			};


			function Distance (x1, x2, y1, y2) {
				return Math.sqrt((x2-x1)*(x2-x1) + (y2-y1)*(y2-y1));
			};

			setInterval(onTimerTick, 16); 
			function onTimerTick() {
				var dist = Distance(mouseX, circleX, mouseY, circleY);
				if(dist < 600) {
					var difX = circleX - mouseX;
					var difY = circleY - mouseY;
					if(difX > 0) {						
						if(circleX + radius + 50/difX < 1650) {
							circleX = circleX + 50/difX;
						}
					} else if(difX < 0) {
						if(circleX - radius + 50/difX > 0) {
							circleX += 50/difX;
						}	
				    }
					if(difY > 0) {
						if(circleY + radius + 50/difY < 900) {
							circleY += 50/difY;
						}	
					} else if(difY < 0) {
						if(circleY - radius + 50/difY > 0) {
							circleY += 50/difY;
						}
					}
					moveCircle(circleX, circleY);
				}
			}

		</script>

	</body>
</html>